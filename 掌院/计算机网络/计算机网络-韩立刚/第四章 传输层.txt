TCP 将传输的文件分段 建立会话 可靠传输 流量控制

qq传文件 发邮件 ftp下载文件

UDP 一个数据包就能完成数据通信 不分段 不需要建立会话 不需要流量控制 不可靠传输

DNS用UDP协议 QQ聊天 屏幕广播 多播



查看会话           netstat -n 
查看建立会话的进程 netstat-nb



传输层与应用层的关系

TCP+3389=RDP （远程桌面）

TCP+21=FTP 

TCP+23=TELNET(远程登录） 

TCP+25=SMTP 

TCP/UDP+53=SMTP 

TCP+80=HTTP


服务启动后就会启动端口侦听客户端的访问

客户端使用IP地址定位服务器 使用端口定位服务

网卡设置 只开80端口

netstat -a 查看侦听端口

telnet + IP +3389 查看目标3389端口是否开启

mstsc 打开本地远程桌面

更改端口，迷惑入侵者

更改远程服务端口：regedit

端口不能冲突 取值范围0到65535



  UDP：

    伪首部：12字节
           1.源IP地址    4
           2.目的IP地址  4
           3.0           1
           4.17          1   协议号
           5.UDP长度     2  
      首部：（8字节）
           1.源端口    2 字节
           2.目标端口  2 字节
           3.长度      2 字节
           4.检验和    2 字节
      
  TCP：

     1.基于连接
     2.每一条链接 点对点
     3.可靠交付：            

               停止等待协议（ARQ），优点简单，缺点：信道利用率低
               流水线传输（连续ARQ）滑动窗口技术 连续确认

     4.全双工  
     5.面向字节流

      格式：
          首部：一般20个字节
       
             1.源端口                       2字节
             2.目的端口                     2字节
             3.序号                         4字节   每个段的第一个字节序号
             4.确认号                       4字节   去发第几个开始的段
             5.数据偏移     1111            每个1表示15个字节，表示首部最长60字节 表示第多少个字节之后是数据部分
             5.保留：                           
             6.URG（优先级 发送端插队） ACK（0无效，1有效） PSH（接收端插队 后到先处理） RST（1表示出现严重错误） SYN(建立会话 1) FIN（1释放链接）
             7.窗口                         两次握手协商最大缓存
             8.检验和
             9.紧急指针                      URG为1时，指针有个数，表明哪些数据可以插队
            10.选项
            11.填充

syn攻击 频繁建立会话 瘫痪系统  伪造源地址
land 攻击 目标 跟 源 地址 一样

     



    可靠传输：滑动窗口技术 超时重传
    流量控制：通过修改接收窗口的大小 控制
    网络阻塞：

  三种状态：1.打开一个不存在的网页
            2.syn攻击
            3.established
            

  TCP连接必须经过2MSL真正释放